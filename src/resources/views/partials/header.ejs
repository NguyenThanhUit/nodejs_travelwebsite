<header >
  <div class="left-section">
    <div class="logo"><img src="\img\logo.jpg" alt="Logo"></div>
  </div>

  <div class="right-section">
    <a href="#"><i class="material-icons">local_mall</i>Chuyến đi của tôi</a>
    <a href="#"><i class="material-icons">call</i>Liên hệ</a>
    <div class="dropdown">
      <a href="javascript:void(0);" onclick="toggleDropdown(event, 'dropdownMenu')"><i class="material-icons">reorder</i>Danh mục</a>
      <div class="dropdown-content" id="dropdownMenu">
        <a href="javascript:void(0);" onclick="toggleOptionDropdown(event, 'option1Dropdown')">Điểm đến</a>
        <div class="option1-dropdown" id="option1Dropdown">
          <a href="#">Việt Nam</a>
          <a href="#">Châu Á</a>
          <a href="#">Châu Âu</a>
          <a href="#">Châu Mỹ</a>
          <a href="#">Châu Đại Dương</a>
          <a href="#">Trung Đông</a>
        </div>
        <a href="javascript:void(0);" onclick="toggleOptionDropdown(event, 'option2Dropdown')">Loại hình tour</a>
        <div class="option2-dropdown" id="option2Dropdown">
          <a href="#">Tour theo lịch trình có sẵn</a>
          <a href="#">Hành hương Công giáo</a>
          <a href="#">Du lịch độc lạ</a>
        </div>
        <a href="#">Góc kiến thức</a>
        <a href="#">Thông tin hữu ích</a>
        <a href="#">Về ViVaViet</a>
      </div>
    </div>
    <% if(isLoggedIn) { %>
      <div class="dropdown" id="logout">
        <button type="button" class="btn btn-primary dropdown-toggle" data-bs-toggle="dropdown">
          <i class="material-icons">account_circle</i>
        </button>
        <ul class="dropdown-menu">
          <li><a class="dropdown-item" href="/logout">Logout</a></li>
        </ul>
      </div>
    <% } else { %>
    <a href="/login" class="login-link"><i class="material-icons">account_circle</i>Đăng nhập</a>
    <% } %>
  </div>
</header>


<script>
  // Dropdown logic
  function toggleDropdown(event, menuId) {
    const dropdowns = document.querySelectorAll('.dropdown-content');
    const currentDropdown = document.getElementById(menuId);
    const isOpen = currentDropdown.style.display === 'block';

    // Đóng tất cả dropdown khác
    dropdowns.forEach(dropdown => {
      dropdown.style.display = 'none';
    });

    // Mở dropdown hiện tại
    currentDropdown.style.display = isOpen ? 'none' : 'block';

    // Đóng tất cả dropdown con khi mở hoặc đóng dropdown chính
    const subDropdowns = document.querySelectorAll('.option1-dropdown, .option2-dropdown');
    subDropdowns.forEach(subDropdown => {
      subDropdown.style.display = 'none';
    });

    event.stopPropagation();
  }

  function toggleOptionDropdown(event, optionId) {
    const optionDropdown = document.getElementById(optionId);
    const isOpen = optionDropdown.style.display === 'block';

    // Đóng tất cả dropdowns khác
    const optionDropdowns = document.querySelectorAll('.option1-dropdown, .option2-dropdown');
    optionDropdowns.forEach(dropdown => {
      dropdown.style.display = 'none';
    });

    // Nếu dropdown đã mở, thì đóng nó
    if (isOpen) {
      optionDropdown.style.display = 'none'; // Đóng dropdown
    } else {
      optionDropdown.style.display = 'block'; // Mở dropdown
    }
    event.stopPropagation();
  }

  // Đóng tất cả dropdown khi nhấn ra ngoài
  window.addEventListener('click', function(event) {
    const dropdowns = document.querySelectorAll('.dropdown-content, .option1-dropdown, .option2-dropdown');
    dropdowns.forEach(dropdown => {
      dropdown.style.display = 'none'; // Đóng tất cả dropdown
    });
  });
</script>
